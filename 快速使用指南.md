# 🎀 雌小鬼的电梯按钮检测系统 - 快速使用指南

大姐姐～欢迎使用我开发的电梯按钮检测系统！这个杂鱼指南会教你怎么使用呢～

## 📦 环境安装

### 1. Python环境要求
- Python 3.8 或以上版本
- 推荐使用虚拟环境

### 2. 安装依赖
```bash
# 安装所有必要的依赖包
pip install -r requirements.txt

# 或者单独安装核心依赖
pip install ultralytics opencv-python streamlit torch
```

### 3. 验证安装
```bash
python -c "import cv2, torch, ultralytics; print('✅ 依赖安装成功！')"
```

## 🚀 快速开始

### 方式一：摄像头实时检测（推荐！）
```bash
# 基础使用 - 直接启动摄像头检测
python camera_detect.py

# 高级使用 - 自定义参数
python camera_detect.py --model best.pt --conf 0.3 --camera 0
```

**控制键说明:**
- `q`: 退出检测
- `s`: 截图保存
- `c`: 切换置信度显示

### 方式二：Web界面（功能最全）
```bash
# 启动Web界面
python ui.py

# 或直接运行
streamlit run web.py
```

然后在浏览器中打开 `http://localhost:8501`

### 方式三：单张图片检测
```bash
# 使用YOLO命令行工具
yolo predict model=best.pt source=your_image.jpg

# 或编写简单脚本
python -c "
from ultralytics import YOLO
model = YOLO('best.pt')  # 使用训练好的模型
results = model('your_image.jpg')
results[0].show()
"
```

## 🎯 使用不同的检测模式

### 1. 摄像头实时检测
```bash
# 默认摄像头
python camera_detect.py

# 指定摄像头ID（如果有多个摄像头）
python camera_detect.py --camera 1

# 调整置信度阈值
python camera_detect.py --conf 0.3
```

### 2. 图片批量检测
```bash
# 检测文件夹中的所有图片
yolo predict model=best.pt source=./images/

# 检测单张图片并保存结果
yolo predict model=best.pt source=test.jpg save=True
```

### 3. 视频检测
```bash
# 检测视频文件
yolo predict model=best.pt source=video.mp4

# 检测并保存结果视频
yolo predict model=best.pt source=video.mp4 save=True
```

## 🤖 模型相关

### 使用预训练模型
如果你没有训练好的电梯按钮检测模型，系统会自动使用通用的YOLOv8模型：
```bash
python camera_detect.py  # 自动下载yolov8n.pt
```

### 训练自己的模型
```bash
# 训练电梯按钮检测模型
python train.py

# 训练完成后会在runs/detect/train_v8_data/weights/目录下生成best.pt文件
```

### 使用训练好的模型
```bash
# 使用训练好的模型进行检测
python camera_detect.py --model ./runs/detect/train_v8_data/weights/best.pt
```

## 📱 Web界面功能说明

### 1. 图片检测模式
- 上传单张图片
- 实时显示检测结果
- 显示检测统计信息

### 2. 摄像头实时检测模式
- 启动/停止摄像头
- 实时检测显示
- 截图功能

### 3. 视频检测模式
- 上传视频文件
- 批量处理（开发中）

## ⚙️ 参数调整建议

### 置信度阈值（conf）
- **0.1-0.3**: 检测更多目标，但可能有误检
- **0.4-0.6**: 平衡检测效果（推荐）
- **0.7-0.9**: 只检测高置信度目标

### 摄像头选择
- **0**: 通常是内置摄像头
- **1,2,3...**: 外接USB摄像头

## 🐛 常见问题解决

### 1. 摄像头无法打开
```bash
# 检查摄像头是否被其他程序占用
# 尝试不同的摄像头ID
python camera_detect.py --camera 1
```

### 2. 检测效果不好
```bash
# 降低置信度阈值
python camera_detect.py --conf 0.3

# 使用训练好的专门模型
python camera_detect.py --model best.pt
```

### 3. 运行速度慢
- 使用较小的模型（yolov8n.pt）
- 降低摄像头分辨率
- 确保安装了GPU版本的PyTorch

### 4. 依赖安装失败
```bash
# 更新pip
pip install --upgrade pip

# 使用国内镜像源
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple/
```

## 📊 性能优化建议

1. **硬件要求**:
   - CPU: 4核以上
   - 内存: 8GB以上
   - GPU: 可选，但强烈推荐

2. **软件优化**:
   - 使用最新版本的依赖
   - 确保摄像头驱动正常
   - 关闭不必要的后台程序

## 🎀 最后的话

大姐姐～这个电梯按钮检测系统是我精心开发的呢！

- 如果检测效果不好，记得训练专门的电梯按钮模型哦
- 有问题的话检查一下依赖是否安装正确
- 记得给这个可爱的系统点个赞～

祝你使用愉快！雌小鬼会一直陪着你的～ 💕

